!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.VectorTile=t()}}(function(){return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return i(n?n:t)},h,h.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";function r(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var r=new s(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var s=t("./vectortilelayer");e.exports=r},{"./vectortilelayer":3}],2:[function(t,e,n){"use strict";function r(t,e,n,r,s){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=s,t.readFields(i,this,e)}function i(t,e,n){1==t?e._id=n.readVarint():2==t?s(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function s(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}var o=t("point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,s=0,u=0,a=[];t.pos<n;){if(!i){var h=t.readVarint();r=7&h,i=h>>3}if(i--,1===r||2===r)s+=t.readSVarint(),u+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new o(s,u));else{if(7!==r)throw new Error("unknown command "+r);e.push(e[0].clone())}}return e&&a.push(e),a},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,s=0,o=1/0,u=-(1/0),a=1/0,h=-(1/0);t.pos<e;){if(!r){var f=t.readVarint();n=7&f,r=f>>3}if(r--,1===n||2===n)i+=t.readSVarint(),s+=t.readSVarint(),o>i&&(o=i),i>u&&(u=i),a>s&&(a=s),s>h&&(h=s);else if(7!==n)throw new Error("unknown command "+n)}return[o,a,u,h]},r.prototype.toGeoJSON=function(t,e,n){for(var i=this.extent*Math.pow(2,n),s=this.extent*t,o=this.extent*e,u=this.loadGeometry(),a=r.types[this.type],h=0;h<u.length;h++)for(var f=u[h],p=0;p<f.length;p++){var c=f[p],d=180-360*(c.y+o)/i;f[p]=[360*(c.x+s)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}return"Point"===a&&1===u.length?u=u[0][0]:"Point"===a?(u=u[0],a="MultiPoint"):"LineString"===a&&1===u.length?u=u[0]:"LineString"===a&&(a="MultiLineString"),{type:"Feature",geometry:{type:a,coordinates:u},properties:this.properties}}},{"point-geometry":4}],3:[function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(s(n))}function s(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}var o=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(0>t||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":2}],4:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}]},{},[1])(1)});
